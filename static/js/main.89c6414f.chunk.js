(window["webpackJsonphidden-leaf-rl"]=window["webpackJsonphidden-leaf-rl"]||[]).push([[0],{123:function(t,e,n){t.exports=n(269)},128:function(t,e,n){},269:function(t,e,n){"use strict";n.r(e);var a=n(5),r=n.n(a),i=n(71),c=n.n(i),o=(n(128),n(0)),s=n(1),u=n(4),l=n(2),p=n(3),h=(n(74),n(122)),f=n.n(h),y={TITLE:0,LEVEL:1},g=n(10),v=n.n(g),m=n(17),b=n(11),d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise(function(e){return setTimeout(e,t)})},O=function(t){return t[Math.floor(Math.random()*t.length)]},j=function(t){return"".concat(t.x,",").concat(t.y)},k=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,r=t.map,i=function(t,e){return!!r[t+","+e]&&"GROUND"===r[t+","+e].type},c=new b.e.AStar(e.x,e.y,i,{topology:a}),o=[];return c.compute(n.x,n.y,function(t,e){o.push({x:t,y:e})}),o.slice(1)},w=function(t,e,n,a,r){return k(t,e,n,a).slice(0,r+1)},E=function(t){var e=Object.keys(t),n=O(e).split(",");return{coordinates:{x:parseInt(n[0]),y:parseInt(n[1])},text:n}},A=function(t){return t.filter(function(t){return t.hasOwnProperty("durability")})},x=function(t){return 2/3*(Math.pow(t,3)-9*Math.pow(t,2)+32*t-18)},P=function(){function t(e){var n=e.statusEffects,a=void 0===n?[]:n,r=e.actors,i=void 0===r?[]:r,c=e.currentActor,s=void 0===c?0:c,u=e.isRunning,l=void 0!==u&&u,p=e.game,h=void 0===p?null:p;Object(o.a)(this,t),this.statusEffects=a,this.actors=i,this.currentActor=s,this.isRunning=l,this.game=h}return Object(s.a)(t,[{key:"processV1",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e,n,a;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.actors[this.currentActor]).gainEnergy(e.speed),!e.hasEnoughEnergy()){t.next=18;break}if(n=e.getAction(this.game)){t.next=6;break}return t.abrupt("return",!1);case 6:return a=n.perform(),this.game.draw(),t.next=11,d(n.processDelay);case 11:if(a.success){t.next=13;break}return t.abrupt("return",!1);case 13:if(null!==a.alternative){t.next=15;break}return t.abrupt("break",18);case 15:n=a.alternative,t.next=6;break;case 18:return this.currentActor=(this.currentActor+1)%this.actors.length,t.abrupt("return",!0);case 20:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"process",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e,n,a,r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.actors[this.currentActor],n=!0;case 2:if(!n){t.next=30;break}if(a=0,!e.hasEnoughEnergy()){t.next=26;break}if(r=e.getAction(this.game)){t.next=8;break}return t.abrupt("return",!1);case 8:a+=r.energyCost;case 9:return t.next=12,r.perform();case 12:return i=t.sent,this.game.draw(),t.next=16,d(r.processDelay);case 16:if(i.success){t.next=18;break}return t.abrupt("return",!1);case 18:if(null!==i.alternative){t.next=20;break}return t.abrupt("break",23);case 20:r=i.alternative,t.next=9;break;case 23:this.processStatusEffects(a),t.next=28;break;case 26:e.gainEnergy(e.speed),n=!1;case 28:t.next=2;break;case 30:return this.currentActor=(this.currentActor+1)%this.actors.length,t.abrupt("return",!0);case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"start",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.isRunning=!0;case 1:if(!this.isRunning){t.next=7;break}return t.next=4,this.process();case 4:this.isRunning=t.sent,t.next=1;break;case 7:return(e=this.actors[this.currentActor]).keymap&&(this.game.visibleKeymap=e.keymap),t.next=11,this.game.updateReact(this.game);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"stop",value:function(){this.isRunning=!1}},{key:"addStatusEffect",value:function(t){return!t.allowDuplicates&&this.statusEffects.filter(function(e){return e.actor.id===t.actor.id&&e.name===t.name}).length>0?(console.log("".concat(t.name," cannot be applied twice to ").concat(t.actor.name)),!1):(t.onStart(),this.statusEffects.push(t),!0)}},{key:"removeStatusEffectById",value:function(t){this.statusEffects=this.statusEffects.filter(function(e){return e.id!==t||(e.onStop(),!1)})}},{key:"removeStatusEffectByActorId",value:function(t){this.statusEffects=this.statusEffects.filter(function(e){return e.actor.id!==t||(e.onStop(),!1)})}},{key:"removeDeadStatusEffects",value:function(){this.statusEffects=this.statusEffects.filter(function(t){return!(t.lifespan>=0&&t.timeToLive<=0)||(t.onStop(),!1)})}},{key:"processStatusEffects",value:function(t){this.statusEffects.forEach(function(e){e.timeSinceLastStep+=t,e.timeToLive-=t,e.timeSinceLastStep>=e.stepInterval&&(e.onStep(),e.timeSinceLastStep=0)}),this.removeDeadStatusEffects()}},{key:"addActor",value:function(t){this.actors.push(t)}},{key:"addActorAsPrevious",value:function(t){this.actors.splice(this.currentActor,0,t)}},{key:"addActorAsNext",value:function(t){this.actors.splice(this.currentActor+1,0,t)}},{key:"setActorToPrevious",value:function(t){this.currentActor=Math.max(this.currentActor-1,0)}},{key:"setActorToNext",value:function(t){this.currentActor=(this.currentActor+1)%this.actors.length}}]),t}(),D=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"process",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e,n,a,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.actors[this.currentActor],n=!0;case 2:if(!n){t.next=26;break}if(!e.hasEnoughEnergy()){t.next=23;break}if(a=e.getAction(this.game)){t.next=7;break}return t.abrupt("return",!1);case 7:return t.next=10,d(a.processDelay);case 10:return t.next=12,a.perform();case 12:if(r=t.sent,this.game.draw(),r.success){t.next=16;break}return t.abrupt("return",!1);case 16:if(null!==r.alternative){t.next=18;break}return t.abrupt("break",21);case 18:a=r.alternative,t.next=7;break;case 21:t.next=24;break;case 23:n=!1;case 24:t.next=2;break;case 26:if(this.currentActor+=1,!(this.currentActor+1>=this.actors.length)){t.next=31;break}return this.currentActor=0,this.actors.forEach(function(t){return t.gainEnergy(t.speed)}),t.abrupt("return",!1);case 31:return t.abrupt("return",!0);case 32:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),e}(P),C=n(9),S={GROUND:{background:"#424242",character:"",passable:!0},WATER:{animation:[{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#9dc3d3",character:"\u2591",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2592",passable:!1},{background:"#424242",foreground:"#8aa",character:"\u2593",passable:!1}],background:"#9dc3d3",character:"\u2591",passable:!1},WIN:{background:"white",foreground:"black",character:"W",passable:!0}},T={N:[0,-1],S:[0,1],E:[1,0],W:[-1,0]},I={HEAD:"HEAD",TORSO:"TORSO",BACK:"BACK",HAND:"HAND",FEET:"FEET"},N={human:function(){return[{type:I.HEAD,name:"head",item:null},{type:I.TORSO,name:"torso",item:null},{type:I.BACK,name:"back",item:null},{type:I.HAND,name:"left_hand",item:null},{type:I.HAND,name:"right_hand",item:null},{type:I.FEET,name:"feet",item:null}]}},R={verticalLine:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:0,y:-1,taken:!1}]},smallSquare:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1}]},square:{x_offset:1,y_offset:1,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1}]},bigSquare:{x_offset:2,y_offset:2,positions:[{x:0,y:0,taken:!1},{x:0,y:1,taken:!1},{x:1,y:1,taken:!1},{x:1,y:0,taken:!1},{x:1,y:-1,taken:!1},{x:0,y:-1,taken:!1},{x:-1,y:-1,taken:!1},{x:-1,y:0,taken:!1},{x:-1,y:1,taken:!1},{x:0,y:1,taken:!1},{x:2,y:2,taken:!1},{x:2,y:0,taken:!1},{x:2,y:-2,taken:!1},{x:0,y:-2,taken:!1},{x:-2,y:-2,taken:!1},{x:-2,y:0,taken:!1},{x:-2,y:2,taken:!1}]},circle:{x_offset:0,y_offset:0,positions:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=x(n),r=[],i=0;i<a;i++){var c=Math.round(t+Math.cos(2*Math.PI/a*i)*n),o=Math.round(e+Math.sin(2*Math.PI/a*i)*n);r.push({x:c,y:o})}return console.table(r),r}(0,0,2)}},M=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}var L=function(){function t(e){var n=e.engine,a=void 0===n?null:n,r=e.map,i=void 0===r?{}:r,c=e.display,s=void 0===c?new b.b({width:90,fontSize:24,bg:"#424242"}):c,u=e.tileKey,l=void 0===u?S:u;Object(o.a)(this,t),this.engine=a,this.map=i,this.display=s,this.tileKey=l}return Object(s.a)(t,[{key:"randomlyPlaceActorsOnMap",value:function(){var t=this;this.engine.actors.forEach(function(e){var n=E(t.map).coordinates,a=t.map[j(n)];e.pos=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},n),a.entities.push(e)})}},{key:"placeActorsOnMap",value:function(){var t=this;this.engine.actors.forEach(function(e){var n=t.map[j(e.pos)];n?n.entities.push(e):console.log("could not place ".concat(e.id,": ").concat(e.name," on map"))})}},{key:"placeActorOnMap",value:function(t){var e=this.map[j(t.pos)];return e?(e.entities.push(t),!0):(console.log("could not place ".concat(t.id,": ").concat(t.name," on map")),!1)}},{key:"removeActorFromMap",value:function(t){var e=this.map[j(t.pos)];this.map[j(t.pos)].entities=e.entities.filter(function(e){return e.id!==t.id})}},{key:"createLevel",value:function(){var t=new b.d.Arena,e=[];t.create(function(t,n,a){if(!a){var r,i,c=t+","+n,o=0;S.GROUND.animation&&(r=0,i=S.GROUND.animation.length,r=Math.ceil(r),i=Math.floor(i),o=Math.floor(Math.random()*(i-r))+r),this.map[c]={type:"GROUND",currentFrame:o,entities:[]},e.push(c)}}.bind(this)),this.map["10,10"]={type:"WIN",entities:[]},this.randomlyPlaceActorsOnMap()}},{key:"canOccupyPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{passable:!1},n=!1,a=this.map[j(t)];if(a){var r=a.entities.filter(function(t){return!t.passable}).length>0;if(!r||e.passable){var i=this.map[j(t)];this.tileKey[i.type].passable&&(n=!0)}}return n}},{key:"cursorCanOccupyPosition",value:function(t){var e=!1;return this.map[j(t)]&&(e=!0),e}},{key:"show",value:function(){document.getElementById("display").appendChild(this.display.getContainer())}},{key:"draw",value:function(){for(var t in this.map){var e=t.split(","),n=parseInt(e[0]),a=parseInt(e[1]),r=this.map[t],i=this.tileKey[r.type],c=i.character,o=i.foreground,s=i.background;if(r.entities.length>0){var u=r.entities[r.entities.length-1];c=u.renderer.character,o=u.renderer.color,u.renderer.background&&(s=u.renderer.background)}this.display.draw(n,a,c,o,s)}}},{key:"addActor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.engine,n=this.placeActorOnMap(t);return!!n&&(e.actors.push(t),this.draw(),!0)}},{key:"placeAndDrawActor",value:function(t){this.placeActorsOnMap(),this.draw()}},{key:"removeActor",value:function(t){this.engine.actors=this.engine.actors.filter(function(e){return e.id!==t.id}),this.removeActorFromMap(t),console.log("remove actor"),this.draw()}},{key:"initialize",value:function(t){var e=this;this.engine.game=this,this.engine.actors.forEach(function(t){t.game=e}),this.show(),this.createLevel(),this.draw(),t.current.focus()}}]),t}(),_=function(t,e){if(!e.isRunning){var n=e.actors[e.currentActor].keymap,a=t.key;if(!(a in n))return;n[a].activate(),e.start()}};var B=function(t){return r.a.createElement("button",{onClick:t.onClick,className:"btn grey darken-3"},t.children)},G=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"Information UI"},r.a.createElement("div",{className:"flow-text"},"Information"),this.props.data&&this.props.data.map(function(t,e){return r.a.createElement(B,{key:e,onClick:function(){return null}},"".concat(t.label,": ").concat(t.value))}))}}]),e}(r.a.Component),U=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"Equipment UI"},r.a.createElement("div",{className:"flow-text"},"Equipment"),this.props.equipment&&this.props.equipment.map(function(t,e){return r.a.createElement(B,{key:e,onClick:function(){return null}},t.name," ",t.item?t.item.renderer.character:"")}))}}]),e}(r.a.Component),K=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"Inventory UI"},r.a.createElement("div",{className:"flow-text"},"Inventory"),this.props.inventory&&this.props.inventory.map(function(t,e){return r.a.createElement(B,{key:e,onClick:function(){return null}},e," ",t.name," ",t.renderer.character)}))}}]),e}(r.a.Component),H=n(14),W=function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"Keymap UI"},r.a.createElement("div",{className:"flow-text"},"Keymap"),this.props.keymap&&Object.entries(this.props.keymap).map(function(t,e){var n=Object(H.a)(t,2),a=n[0],i=n[1];return r.a.createElement(B,{key:e,onClick:function(){return null}},a," ",i.label)}))}}]),e}(r.a.Component),V=n(7),F=n(20),z=n(32),Y=n(8),J=n(23),Q=n(28),$=n.n(Q);function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var tt=function(){function t(e){var n=e.game,a=e.actor,r=e.energyCost,i=void 0===r?100:r,c=e.processDelay,s=void 0===c?50:c;Object(o.a)(this,t),this.actor=a,this.game=n,this.energyCost=i,this.processDelay=s}return Object(s.a)(t,[{key:"perform",value:function(){return console.log("".concat(this.actor.name," performs")),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}]),t}(),et=function(t){function e(t){var n,a=t.effect,r=t.processDelay,i=void 0===r?0:r,c=Object(V.a)(t,["effect","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},c)))).effect=a,n.processDelay=i,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=this.game.engine.addStatusEffect(this.effect);return t&&(this.actor.energy-=this.energyCost),{success:t,alternative:null}}}]),e}(tt),nt=function(t){function e(t){var n,a=t.message,r=t.processDelay,i=void 0===r?50:r,c=Object(V.a)(t,["message","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},c)))).message=a,n.processDelay=i,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){return console.log("".concat(this.actor.name," says ").concat(this.message)),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}]),e}(tt),at=function(t){function e(t){var n,a=t.item,r=Object(V.a)(t,["item"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},r)))).item=a,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1;if(this.item.equipmentType){var e=this.actor.getItemInSlot(this.item.equipmentType);e&&(this.actor.addToContainer(e),this.actor.unequip(e)),this.actor.removeFromContainer(this.item),this.actor.equip(this.item.equipmentType,this.item),console.log("".concat(this.actor.name," equips ").concat(this.item.name,".")),t=!0}return this.actor.energy-=this.energyCost,{success:t,alternative:null}}}]),e}(tt),rt=function(t){function e(t){var n,a=t.item,r=Object(V.a)(t,["item"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},r)))).item=a,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){return console.log("".concat(this.actor.name," puts ").concat(this.item.name," away.")),this.actor.unequip(this.item),this.actor.addToContainer(this.item),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}]),e}(tt),it=function(t){function e(t){var n,a=t.item,r=Object(V.a)(t,["item"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},r)))).item=a,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){return console.log("".concat(this.actor.name," drops ").concat(this.item.name,".")),this.actor.removeFromContainer(this.item),this.game.map[j(this.actor.pos)].entities.push(this.item),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}]),e}(tt),ct=function(t){function e(t){var n,a=t.item,r=Object(V.a)(t,["item"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},r)))).item=a,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=this;console.log("".concat(this.actor.name," picks up ").concat(this.item.name,".")),this.actor.addToContainer(this.item);var e=this.game.map[j(this.actor.pos)].entities;return this.game.map[j(this.actor.pos)].entities=e.filter(function(e){return e.id!==t.item.id}),this.actor.energy-=this.energyCost,{success:!0,alternative:null}}}]),e}(tt),ot=function(t){function e(t){var n,a=t.processDelay,r=void 0===a?0:a,i=Object(V.a)(t,["processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},i)))).processDelay=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){return this.actor.energy-=this.energyCost,this.actor.destroy(),{success:!0,alternative:null}}}]),e}(tt),st=function(t){function e(t){var n,a=t.cloneArgs,r=void 0===a?[]:a,i=Object(V.a)(t,["cloneArgs"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},i)))).cloneArgs=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1;this.actor.energy-=this.energyCost,console.log("".concat(this.actor.name," is cloning itself"));var e=Object(J.cloneDeep)(this.actor);return e.game=this.actor.game,e.id=$()(),this.cloneArgs.forEach(function(t){console.log(t),e[t.attribute]=t.value}),this.game.placeActorOnMap(e)&&(this.game.engine.addActorAsNext(e),this.game.draw(),t=!0),{success:t,alternative:null}}}]),e}(tt),ut=function(t){function e(t){var n,a=t.targetPos,r=t.processDelay,i=void 0===r?0:r,c=Object(V.a)(t,["targetPos","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},c)))).targetPos=a,n.processDelay=i,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=this,e=!1;if(this.game.cursorCanOccupyPosition(this.targetPos)){var n=this.game.map[j(this.actor.pos)];this.game.map[j(this.actor.pos)]=Z({},n,{entities:n.entities.filter(function(e){return e.id!==t.actor.id})}),this.actor.pos=this.targetPos,this.game.map[j(this.targetPos)].entities.push(this.actor),e=!0}return{success:e,alternative:null}}}]),e}(tt),lt=function(t){function e(t){var n,a=t.targetPos,r=t.entity,i=Object(V.a)(t,["targetPos","entity"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},i)))).targetPos=a,n.entity=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1;return this.game.canOccupyPosition(this.targetPos,this.entity)&&(this.entity.pos=this.targetPos,this.game.engine.addActorAsNext(this.entity),t=!0),t&&(this.actor.energy-=this.energyCost),{success:t,alternative:null}}}]),e}(tt),pt=function(t){function e(t){var n,a=t.targetPositions,r=void 0===a?[]:a,i=Object(V.a)(t,["targetPositions"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},i)))).targetPositions=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=this,e=!1;return console.log("actor ",this.actor.pos),this.targetPositions.forEach(function(n){if(console.log("target ",n),t.game.canOccupyPosition(n,t.entity)){var a=Object(J.cloneDeep)(t.entity);a.game=t.game,a.id=$()(),a.pos=n,t.game.placeActorOnMap(a)&&(e=!0)}}),e&&(this.actor.energy-=this.energyCost),{success:e,alternative:null}}}]),e}(function(t){function e(t){var n,a=t.targetPos,r=t.entity,i=t.processDelay,c=void 0===i?25:i,s=Object(V.a)(t,["targetPos","entity","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},s)))).targetPos=a,n.processDelay=c,n.entity=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1;return this.game.canOccupyPosition(this.targetPos,this.entity)&&(this.entity.pos=this.targetPos,t=this.game.placeActorOnMap(this.entity)),t&&(this.actor.energy-=this.energyCost),{success:t,alternative:null}}}]),e}(tt)),ht=function(t){function e(t){var n,a=t.targetPos,r=t.processDelay,i=void 0===r?25:r,c=Object(V.a)(t,["targetPos","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},c)))).targetPos=a,n.processDelay=i,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1,e=null;return this.actor.move(this.targetPos)?(this.actor.energy-=this.energyCost,t=!0):(t=!0,e=new yt({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:100})),{success:t,alternative:e}}}]),e}(tt),ft=function(t){function e(t){var n,a=t.targetPos,r=t.direction,i=Object(V.a)(t,["targetPos","direction"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},i)))).targetPos=a,n.direction=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1,e=null;return this.actor.shove(this.targetPos,this.direction)?(this.actor.energy-=this.energyCost,t=!0):(t=!0,e=new yt({targetPos:this.targetPos,game:this.game,actor:this.actor,energyCost:100})),{success:t,alternative:e}}}]),e}(tt),yt=function(t){function e(t){var n,a=t.targetPos,r=t.processDelay,i=void 0===r?25:r,c=Object(V.a)(t,["targetPos","processDelay"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},c)))).targetPos=a,n.processDelay=i,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t;return this.actor.entityTypes.includes("ATTACKING")?((t=this.actor.attack(this.targetPos))&&(this.actor.energy-=this.energyCost),{success:t,alternative:null}):{success:!0,alternative:new nt({message:"Ooh I don't know how to attack",game:this.game,actor:this.actor})}}}]),e}(tt),gt=function(t){function e(t){var n=Object(z.a)({},t);return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).call(this,Z({},n)))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1,n=null;this.actor.passable=!1;var a=Object(Y.a)(Object(l.a)(e.prototype),"perform",this).call(this);(a.success&&(this.actor.path.shift(),t=!0),0===this.actor.path.length&&(t=!0,n=new ot({game:this.game,actor:this.actor,energyCost:100,processDelay:0})),a.alternative)&&(this.actor.attack(this.targetPos)&&(n=new ot({game:this.game,actor:this.actor,energyCost:100,processDelay:0})));return{success:t,alternative:n}}}]),e}(ht),vt=function(t){function e(t){var n,a=Object(z.a)({},t);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},a)))).processDelay=0,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=!1,n=null;this.actor.passable=!1;var a=Object(Y.a)(Object(l.a)(e.prototype),"perform",this).call(this);return a.success&&(this.actor.path.shift(),t=!0),0===this.actor.path.length&&(t=!0,n=new ot({game:this.game,actor:this.actor,energyCost:100,processDelay:0})),a.alternative&&this.actor.attack(this.targetPos),{success:t,alternative:n}}}]),e}(ht),mt=function(t){function e(t){var n,a=t.engine,r=Object(V.a)(t,["engine"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,Z({},r)))).engine=a,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"perform",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!0,n=null,console.log("".concat(this.actor.name," is cranking its engine.")),t.prev=3,t.next=6,this.engine.start();case 6:this.actor.energy-=this.energyCost,t.next=14;break;case 9:t.prev=9,t.t0=t.catch(3),console.log("CrankEngine"),console.log(t.t0),n=new ot({game:this.game,actor:this.actor,energyCost:100});case 14:return t.abrupt("return",{success:e,alternative:n});case 15:case"end":return t.stop()}},t,this,[[3,9]])}));return function(){return t.apply(this,arguments)}}()}]),e}(tt),bt=n(15),dt=n.n(bt);n(268);function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var kt=function t(e){var n=e.game,a=void 0===n?null:n,r=e.passable,i=void 0!==r&&r;Object(o.a)(this,t);var c=$()();this.entityTypes=["Entity"],this.id=c,this.game=a,this.passable=i},wt=function(t){return function(t){function e(t){var n,a=t.attackDamage,r=void 0===a?1:a,i=Object(V.a)(t,["attackDamage"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("ATTACKING"),n.attackDamage=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getAttackDamage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.attackDamage+t}},{key:"canAttack",value:function(t){return!0}},{key:"attack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!1,a=this.game.map[j(t)];if(!a)return n;var r=A(a.entities);if(r.length>0){var i=r[0];if(this.canAttack(i)){var c=this.getAttackDamage(e);this.entityTypes.includes("EQUIPING")&&this.equipment.forEach(function(t){t.item&&t.item.entityTypes.includes("ATTACKING")&&(c+=t.item.getAttackDamage())}),console.log("".concat(this.name," does ").concat(c," to ").concat(i.name)),i.decreaseDurability(c),n=!0}}return n}}]),e}(t)},Et=function(t){return function(t){function e(t){var n,a=t.name,r=t.actions,i=void 0===r?[]:r,c=t.speed,s=void 0===c?100:c,p=(t.energy,Object(V.a)(t,["name","actions","speed","energy"]));return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},p)))).entityTypes=n.entityTypes.concat("ACTING"),n.name=a,n.actions=i,n.speed=s,n.energy=s,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getAction",value:function(){var t=O(this.actions);if(t)return t}},{key:"gainEnergy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.speed;this.energy+=t}},{key:"hasEnoughEnergy",value:function(){return this.energy>0}}]),e}(t)},At=function(t){return function(t){function e(t){var n,a=t.pos,r=void 0===a?{x:0,y:0}:a,i=t.renderer,c=Object(V.a)(t,["pos","renderer"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},c)))).entityTypes=n.entityTypes.concat("RENDERING"),n.pos=r,n.renderer=jt({},i),n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getPosition",value:function(){return this.pos}},{key:"move",value:function(t){var e=this,n=!1;if(this.game.canOccupyPosition(t,this)){var a=this.game.map[j(this.pos)];this.game.map[j(this.pos)]=jt({},a,{entities:a.entities.filter(function(t){return t.id!==e.id})}),this.pos=t,this.game.map[j(t)].entities.push(this),n=!0}return n}},{key:"shove",value:function(t,e){var n=this.game.map[j(t)];return n&&n.entities.map(function(t){if(!t.passable){var n={x:t.pos.x+e[0],y:t.pos.y+e[1]};t.move(n)}}),this.move(t)}}]),e}(t)},xt=function(t){return function(t){function e(t){var n,a=t.keymap,r=void 0===a?{}:a,i=Object(V.a)(t,["keymap"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("PLAYING"),n.nextAction=null,n.keymap=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"setNextAction",value:function(t){this.nextAction=t}},{key:"getAction",value:function(){var t=this.nextAction;return this.nextAction=null,t}}]),e}(t)},Pt=function(t){return function(t){function e(t){var n,a=t.targetEntity,r=void 0===a?null:a,i=Object(V.a)(t,["targetEntity"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("CHASING"),n.targetEntity=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getAction",value:function(t){var e=k(t,this.targetEntity.pos,this.pos),n=e.length>0?e[0]:this.pos;return new ht({targetPos:n,game:t,actor:this,energyCost:100})}}]),e}(t)},Dt=function(t){return function(t){function e(t){var n,a=t.durability,r=void 0===a?1:a,i=Object(V.a)(t,["durability"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("DESTRUCTABLE"),n.durability=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"decreaseDurability",value:function(t){this.durability-=t,this.durability<=0&&this.destroy()}},{key:"increaseDurability",value:function(t){this.durability+=t}},{key:"destroy",value:function(){var t=this;this.energy=0;var e=this.game.map[j(this.pos)];this.game.map[j(this.pos)].entities=e.entities.filter(function(e){return e.id!==t.id}),this.game.engine.actors=this.game.engine.actors.filter(function(e){return e.id!==t.id}),this.game.engine.removeStatusEffectByActorId(this.id),this.game.draw()}}]),e}(t)},Ct=dt()(Et,At,xt,function(t){return function(t){function e(t){var n,a=t.initiatedBy,r=void 0===a?null:a,i=Object(V.a)(t,["initiatedBy"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("UI"),n.initiatedBy=r,n.active=!0,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"hasEnoughEnergy",value:function(){return this.active}}]),e}(t)})(kt),St=(dt()(Et,At)(kt),dt()(At,Dt)(kt)),Tt=dt()(Et,At,function(t){return function(t){function e(t){var n,a=t.path,r=void 0!==a&&a,i=t.targetPos,c=void 0===i?null:i,s=Object(V.a)(t,["path","targetPos"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},s)))).entityTypes=n.entityTypes.concat("PUSHING"),n.path=r,n.targetPos=c,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"createPath",value:function(t){var e=k(t,this.targetPos,this.pos,8);this.path=e}},{key:"getAction",value:function(t){this.path||this.createPath(t);var e=this.path.length>0?this.path[0]:this.pos,n=[e.x-this.pos.x,e.y-this.pos.y];if(0===n[0]&&0===n[1])return new ot({game:t,actor:this,energyCost:100,processDelay:0});var a=new ft({targetPos:e,direction:n,game:t,actor:this,energyCost:100});return this.path.shift(),a}}]),e}(t)},Dt)(kt),It=(dt()(Et,At,Pt,Dt)(kt),dt()(Et,At,Pt,Dt,wt)(kt)),Nt=dt()(Et,At,Dt,function(t){return function(t){function e(t){var n,a=t.charge,r=void 0===a?10:a,i=Object(V.a)(t,["charge"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("CHARGING"),n.charge=r,n.chargeMax=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"decreaseCharge",value:function(t){this.charge=Math.max(0,this.charge-t)}},{key:"increaseCharge",value:function(t){this.charge=Math.min(this.chargeMax,this.charge+t)}}]),e}(t)},function(t){return function(t){function e(t){var n,a=Object(z.a)({},t);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},a)))).entityTypes=n.entityTypes.concat("SIGNING"),n.signHistory=[],n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"addSign",value:function(t){this.signHistory.length>=4&&this.signHistory.shift(),this.signHistory.push(t)}},{key:"clearSigns",value:function(){this.signHistory=[]}}]),e}(t)},function(t){return function(t){function e(t){var n,a=t.container,r=void 0===a?[]:a,i=Object(V.a)(t,["container"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("CONTAINING"),n.container=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"contains",value:function(t){var e=this.container.filter(function(e){return e.name===t});return e.length>0&&e[0]}},{key:"addToContainer",value:function(t){this.container.push(t)}},{key:"removeFromContainer",value:function(t){this.container=this.container.filter(function(e){return e.id!==t.id})}}]),e}(t)},function(t){return function(t){function e(t){var n,a=t.equipment,r=void 0===a?N.human():a,i=Object(V.a)(t,["equipment"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},i)))).entityTypes=n.entityTypes.concat("EQUIPING"),n.equipment=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getItemInSlot",value:function(t){if(this.equipment.filter(function(e){return null===e.item&&e.type===t}).length>0)return!1;var e=this.equipment.find(function(e){return e.type===t});return!!e&&(!!e.item&&e.item)}},{key:"equip",value:function(t,e){var n=!1;this.equipment=this.equipment.map(function(a){return n||a.type!==t||null!==a.item||(a.item=e,n=!0),a})}},{key:"unequip",value:function(t){this.equipment=this.equipment.map(function(e){return e.item&&e.item.id===t.id&&(e.item=null),e})}}]),e}(t)},wt,xt)(kt),Rt=(dt()(At,function(t){return function(t){function e(t){var n,a=t.name,r=void 0===a?"nameless":a,i=t.equipmentType,c=void 0===i?I.HAND:i,s=Object(V.a)(t,["name","equipmentType"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},s)))).entityTypes=n.entityTypes.concat("EQUIPABLE"),n.name=r,n.equipmentType=c,n}return Object(p.a)(e,t),e}(t)},wt)(kt),dt()(Et,At,wt,function(t){return function(t){function e(t){var n,a=t.path,r=void 0!==a&&a,i=t.targetPos,c=void 0===i?null:i,s=t.attackDamage,p=void 0===s?1:s,h=t.range,f=void 0===h?3:h,y=Object(V.a)(t,["path","targetPos","attackDamage","range"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},y)))).entityTypes=n.entityTypes.concat("DESTRUCTIVE_PROJECTING"),n.path=r,n.targetPos=c,n.attackDamage=p,n.range=f,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"createPath",value:function(t){var e=w(t,this.targetPos,this.pos,8,this.range);this.path=e}},{key:"getAction",value:function(t){this.path||this.createPath(t);var e=this.path.length>0?this.path[0]:this.pos;return new gt({targetPos:e,game:t,actor:this,energyCost:100})}}]),e}(t)},Dt)(kt)),Mt=(dt()(Et,At,wt,function(t){return function(t){function e(t){var n,a=t.owner_id,r=void 0===a?null:a,i=t.path,c=void 0!==i&&i,s=t.targetPos,p=void 0===s?null:s,h=t.attackDamage,f=void 0===h?1:h,y=t.range,g=void 0===y?3:y,v=Object(V.a)(t,["owner_id","path","targetPos","attackDamage","range"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},v)))).entityTypes=n.entityTypes.concat("GASEOUS_DESTRUCTIVE_PROJECTING"),n.path=c,n.targetPos=p,n.attackDamage=f,n.range=g,n.owner_id=r,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"canAttack",value:function(t){var n=Object(Y.a)(Object(l.a)(e.prototype),"canAttack",this).call(this);return n&&(n=null===this.owner_id||t.owner_id!==this.owner_id),n}},{key:"createPath",value:function(t){var e=w(t,this.targetPos,this.pos,8,this.range);this.path=e}},{key:"getAction",value:function(t){this.path||this.createPath(t);var e=this.path.length>0?this.path[0]:this.pos;return new vt({targetPos:e,game:t,actor:this,energyCost:100})}}]),e}(t)},Dt,function(t){return function(t){function e(t){var n,a=t.isClone,r=void 0!==a&&a,i=t.cloneCount,c=void 0===i?0:i,s=t.clonePattern,p=void 0===s?R.square:s,h=Object(V.a)(t,["isClone","cloneCount","clonePattern"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},h)))).entityTypes=n.entityTypes.concat("GASEOUS"),n.isClone=r,n.cloneCount=c,n.clonePattern=Object(J.cloneDeep)(p),n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"getAction",value:function(t){var n=this.clonePattern.positions.find(function(t){return!t.taken});if(!this.isClone&&n){n.taken=!0;var a=Object(J.cloneDeepWith)(this,function(t,e){switch(e){case"id":case"game":case"engine":case"clones":return null;default:return}});if(a.game=t,a.id=$()(),this.hasOwnProperty("pos")){var r=this.pos;a.pos={x:r.x+n.x,y:r.y+n.y}}a.hasOwnProperty("path")&&(a.path=a.path.map(function(t){return{x:t.x+n.x,y:t.y+n.y}})),a.isClone=!0,this.cloneCount+=1,t.placeActorOnMap(a),t.engine.addActor(a),t.draw()}return Object(Y.a)(Object(l.a)(e.prototype),"getAction",this).call(this,t)}}]),e}(t)})(kt),dt()(Et,Dt,function(t){return function(t){function e(t){var n,a=t.children,r=void 0===a?[]:a,i=t.engine,c=void 0===i?new D({}):i,s=Object(V.a)(t,["children","engine"]);return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,jt({},s)))).entityTypes=n.entityTypes.concat("PARENT"),n.children=r,n.engine=c,n.isInitialized=!1,n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"destroyChild",value:function(t){t.energy=0;var e=this.game.map[j(t.pos)];this.game.map[j(t.pos)].entities=e.entities.filter(function(e){return e.id!==t.id}),this.engine.actors=this.engine.actors.filter(function(e){return e.id!==t.id}),this.game.draw()}},{key:"canAttack",value:function(t){return!this.children.map(function(t){return t.id}).includes(t.id)}},{key:"initialize",value:function(){var t=this;this.isInitialized=!0,this.engine.game=this.game,this.engine.actors=this.children,this.engine.actors.forEach(function(e){e.game=t.game,e.destroy=function(){t.destroyChild(e)},e.canAttack=t.canAttack.bind(t),t.game.placeActorOnMap(e),t.engine.addActor(e),t.game.draw()})}},{key:"getAction",value:function(t){return this.isInitialized||this.initialize(),new mt({game:t,actor:this,engine:this.engine,energyCost:100,processDelay:10})}}]),e}(t)})(kt)),qt="Kunai",Lt="Barrier",_t=function(t){var e=t.engine,n=t.actor,a=t.targetPos,r=t.throwDirection,i=t.speed,c=t.structureType,o=t.createProjectile,s=R[c],u=s.positions.map(function(t){var i={x:n.pos.x+t.x+r.x*s.x_offset,y:n.pos.y+t.y+r.y*s.y_offset},c={x:a.x+t.x,y:a.y+t.y};return o(e,i,c)});return new Mt({game:e.game,passable:!0,speed:i,children:u})},Bt=function(t){return function(t){var e=t.engine,n=(t.actor,t.targetPos),a=t.speed,r=t.structureType,i=t.createProjectile,c=R[r],o=c.positions.map(function(t){var a={x:n.x+t.x+c.x_offset,y:n.y+t.y+c.y_offset},r={x:n.x,y:n.y};return i(e,a,r)});return new Mt({game:e.game,passable:!0,speed:a,children:o})}({engine:t.engine,actor:t.actor,targetPos:t.targetPos,speed:100,structureType:"circle",createProjectile:Ut})},Gt=function(t,e,n){return new Tt({game:t.game,passable:!1,pos:{x:e.x,y:e.y},targetPos:n,renderer:{character:"]",color:"#A89078",background:"#D8C0A8"},name:Lt,durability:3})},Ut=function(t,e,n){return new Rt({game:t.game,targetPos:n,passable:!0,pos:{x:e.x,y:e.y},renderer:{character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"},name:qt,speed:100,energy:0,range:30})},Kt=function(t,e,n){return new Rt({game:t.game,targetPos:n,passable:!0,pos:{x:e.x,y:e.y},renderer:{character:"\ud83d\udd25",color:"wheat",background:"tomato"},name:qt,speed:100,energy:0,range:30})};function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Vt=function(t,e){var n=M.filter(function(e){return!Object.keys(t).includes(e)});t[n[0]]=e},Ft=function(t,e){var n=e.actors[e.currentActor],a=n.pos.x+t[0],r=n.pos.y+t[1];n.setNextAction(new ut({targetPos:{x:a,y:r},game:e.game,actor:n,energyCost:100}))},zt=function(t,e){var n=t.actors[t.currentActor];n.active=!1;var a={x:Math.sign(n.pos.x-e.pos.x),y:Math.sign(n.pos.y-e.pos.y)};t.game.removeActor(n);var r=function(t){var e=t.engine,n=t.actor,a=t.targetPos,r=t.throwDirection;return _t({engine:e,actor:n,targetPos:a,throwDirection:r,speed:500,structureType:"square",createProjectile:Kt})}({engine:t,actor:e,targetPos:Wt({},n.pos),throwDirection:a});r?(r.pos={x:e.pos.x+a.x,y:e.pos.y+a.y},t.actors.push(r),e.setNextAction(new nt({message:"I'll get you with these kunai!",game:t.game,actor:e,energyCost:100}))):console.log("I have no kunais left")},Yt=function(t,e){return{w:{activate:function(){return Ft(T.N,t)},label:"move"},d:{activate:function(){return Ft(T.E,t)},label:"move"},s:{activate:function(){return Ft(T.S,t)},label:"move"},a:{activate:function(){return Ft(T.W,t)},label:"move"},t:{activate:function(){return zt(t,e)},label:"Throw Cloud"},y:{activate:function(){return function(t,e){var n=t.actors[t.currentActor];n.active=!1;var a=Math.sign(n.pos.x-e.pos.x),r=Math.sign(n.pos.y-e.pos.y);t.game.removeActor(n);var i=e.contains(qt);i?(i.game=t.game,i.pos={x:e.pos.x+a,y:e.pos.y+r},i.targetPos=Wt({},n.pos),e.removeFromContainer(i),t.actors.push(i),i.createPath(t.game),t.game.placeActorsOnMap(),t.game.draw(),e.setNextAction(new nt({message:"I'll get you with this kunai!",game:t.game,actor:e,energyCost:100}))):console.log("I have no kunais left")}(t,e)},label:"Throw Kunai"}}},Jt=function(t){var e=t.actors[t.currentActor];t.game.removeActor(e),t.game.visibleInventory=null},Qt=function(t){var e=t.actors[t.currentActor];t.game.removeActor(e),t.game.visibleEquipment=null},$t=function(t,e){var n=e.actors[e.currentActor],a=n.pos.x+t[0],r=n.pos.y+t[1];n.setNextAction(new ht({targetPos:{x:a,y:r},game:e.game,actor:n,energyCost:100}))},Xt=function(t){var e=t.actors[t.currentActor],n=t.game.map[j(e.pos)].entities.filter(function(t){return t.id!==e.id});n.length>0?e.setNextAction(new ct({item:O(n),game:t.game,actor:e,energyCost:100})):console.log("nothing to pickup.")},Zt=function(t){var e=t.engine.actors[t.engine.currentActor],n=E(t.map).coordinates,a=new It({targetEntity:e,pos:n,renderer:{character:O(["\u25c9","\u26e8"]),color:"white",background:""},name:"Ross",game:t,actions:[],durability:O([1,2,4,8]),speed:100});t.placeActorOnMap(a),t.engine.addActor(a),t.draw()},te=function(t){var e=t.game,n=t.actors[e.engine.currentActor],a=n.pos,r=new Ct({initiatedBy:n,pos:a,renderer:{character:"\u2588",color:"white",background:""},name:"Cursor",game:e,keymap:Yt(t,n)});t.addActorAsPrevious(r),t.setActorToPrevious(r),t.game.placeActorOnMap(r),t.game.draw()},ee=function(t){var e=t.actors[t.currentActor];t.game.visibleInventory=e.container;var n=new Ct({initiatedBy:e,pos:Wt({},e.pos),renderer:{character:"I",color:"white",background:""},name:"Inventory",game:t.game});t.addActorAsPrevious(n),t.setActorToPrevious(n),t.game.placeActorOnMap(n),t.game.draw(),n.keymap=function(t,e){var n={Escape:{activate:function(){return Jt(t)},label:"Close"}};return e.container.map(function(a,r){var i={activate:null,label:""};return i.activate=function(){console.log("setting action for ".concat(e.name," to equip ").concat(a.name)),e.setNextAction(new at({item:a,game:t.game,actor:e})),Jt(t)},i.label="Equip ".concat(a.name),Vt(n,i),!0}),n}(t,e)},ne=function(t){var e=t.actors[t.currentActor];t.game.visibleEquipment=e.equipment;var n=new Ct({initiatedBy:e,pos:Wt({},e.pos),renderer:{character:"E",color:"white",background:""},name:"Equipment",game:t.game});t.addActorAsPrevious(n),t.setActorToPrevious(n),t.game.placeActorOnMap(n),t.game.draw(),n.keymap=function(t,e){var n={Escape:{activate:function(){return Qt(t)},label:"Close"}};return e.equipment.filter(function(t){return t.item}).map(function(a){var r={activate:null,label:""};return r.activate=function(){console.log("setting action for ".concat(e.name," to unequip ").concat(a.item.name)),e.setNextAction(new rt({item:a.item,game:t.game,actor:e})),Qt(t)},r.label="Unequip ".concat(a.name),Vt(n,r),!0}),n}(t,e)},ae=function(t){var e=t.actors[t.currentActor];t.game.visibleInventory=e.container;var n=new Ct({initiatedBy:e,pos:Wt({},e.pos),renderer:{character:"D",color:"white",background:""},name:"Drop",game:t.game});t.addActorAsPrevious(n),t.setActorToPrevious(n),t.game.placeActorOnMap(n),t.game.draw(),n.keymap=function(t,e){var n={Escape:{activate:function(){return Jt(t)},label:"Close"}};return e.container.map(function(a,r){var i={activate:null,label:""};return i.activate=function(){console.log("setting action for ".concat(e.name," to drop ").concat(a.name)),e.setNextAction(new it({item:a,game:t.game,actor:e,energyCost:100})),Jt(t)},i.label="Drop ".concat(a.name),Vt(n,i),!0}),n}(t,e)},re=function t(e){var n=e.game,a=e.actor,r=e.name,i=void 0===r?"Effect":r,c=e.lifespan,s=void 0===c?100:c,u=e.stepInterval,l=void 0===u?100:u,p=e.allowDuplicates,h=void 0===p||p,f=e.onStart,y=void 0===f?function(){return null}:f,g=e.onStep,v=void 0===g?function(){return null}:g,m=e.onStop,b=void 0===m?function(){return null}:m;Object(o.a)(this,t),this.game=n,this.actor=a,this.name=i,this.lifespan=s,this.timeToLive=s,this.stepInterval=l,this.allowDuplicates=h,this.timeSinceLastStep=0,this.onStart=y,this.onStep=v,this.onStop=b};function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var oe=new P({}),se=function(t){var e=function(t,e){return new St({game:t.game,passable:!1,pos:{x:e.x,y:e.y},renderer:{character:"\u2726\ufe0f",color:"#A89078",background:"#D8C0A8"},name:Lt,durability:3})},n=function(t,n){var a=n.actors[n.currentActor],r=[];switch(function(t){var e="".concat(t),n=Object.keys(T),a=!1;return n.forEach(function(t){"".concat(T[t])===e&&(a=t)}),a}(t)){case"N":r=r.concat([{x:a.pos.x-1,y:a.pos.y-1},{x:a.pos.x,y:a.pos.y-1},{x:a.pos.x+1,y:a.pos.y-1}]);break;case"S":r=r.concat([{x:a.pos.x-1,y:a.pos.y+1},{x:a.pos.x,y:a.pos.y+1},{x:a.pos.x+1,y:a.pos.y+1}]);break;case"E":r=r.concat([{x:a.pos.x+1,y:a.pos.y-1},{x:a.pos.x+1,y:a.pos.y},{x:a.pos.x+1,y:a.pos.y+1}]);break;case"W":r=r.concat([{x:a.pos.x-1,y:a.pos.y-1},{x:a.pos.x-1,y:a.pos.y},{x:a.pos.x-1,y:a.pos.y+1}])}a.setNextAction(new pt({targetPositions:r,entity:e(n,ce({},a.pos)),game:n.game,actor:a,energyCost:100}))},a=function(t){var e=t.actors[t.currentActor];e.keymap=function(t,e,a){var r=function(){return e.keymap=a};return{Escape:{activate:r,label:"Close"},w:{activate:function(){n(T.N,t),r()},label:"activate N"},d:{activate:function(){n(T.E,t),r()},label:"activate E"},s:{activate:function(){n(T.S,t),r()},label:"activate S"},a:{activate:function(){n(T.W,t),r()},label:"activate W"}}}(t,e,ce({},e.keymap))},r=function(t,e,n){var a=function(t){var e=t.engine,n=t.actor,a=t.targetPos,r=t.throwDirection;return _t({engine:e,actor:n,targetPos:a,throwDirection:r,speed:500,structureType:"smallSquare",createProjectile:Gt})}({engine:n,actor:e,throwDirection:{x:t[0],y:t[1]},targetPos:{x:e.pos.x+10*t[0],y:e.pos.y+10*t[1]}});a&&e.setNextAction(new lt({targetPos:{x:e.pos.x+t[0],y:e.pos.y+t[1]},entity:a,game:n.game,actor:e,energyCost:100}))},i=function(t){var e=t.actors[t.currentActor];e.keymap=function(t,e,n){var a=function(){return e.keymap=n};return{Escape:{activate:a,label:"Close"},w:{activate:function(){r(T.N,e,t),a()},label:"activate N"},d:{activate:function(){r(T.E,e,t),a()},label:"activate E"},s:{activate:function(){r(T.S,e,t),a()},label:"activate S"},a:{activate:function(){r(T.W,e,t),a()},label:"activate W"}}}(t,e,ce({},e.keymap))},c=function(t,e,n){var a=function(){var e=t.actors[t.currentActor];e.active=!1,t.game.removeActor(e)};return{Escape:{activate:a,label:"Close"},w:{activate:function(){return Ft(T.N,t)},label:"move"},d:{activate:function(){return Ft(T.E,t)},label:"move"},s:{activate:function(){return Ft(T.S,t)},label:"move"},a:{activate:function(){return Ft(T.W,t)},label:"move"},k:{activate:function(){!function(t,e){var n=t.actors[t.currentActor],a=Bt({engine:t,actor:e,targetPos:ce({},n.pos)});a&&e.setNextAction(new lt({targetPos:ce({},n.pos),entity:a,game:t.game,actor:e,energyCost:100}))}(t,e),a()},label:"activate"}}},o=new Nt({pos:{x:23,y:7},renderer:{character:"G",color:"#F0D8C0",background:"#603030"},name:"Gaara",actions:[],speed:200,durability:1,keymap:function(t){return{w:{activate:function(){return $t(T.N,t)},label:"walk"},d:{activate:function(){return $t(T.E,t)},label:"walk"},s:{activate:function(){return $t(T.S,t)},label:"walk"},a:{activate:function(){return $t(T.W,t)},label:"walk"},l:{activate:function(){return function(t){var e=t.actors[t.currentActor],n=Object(J.cloneDeep)(e.keymap);delete n.j,delete n.k,delete n.l;var a=[{attribute:"renderer",value:ce({},e.renderer,{background:"#A89078"})},{attribute:"keymap",value:n}];e.setNextAction(new st({game:t.game,actor:e,cloneArgs:a}))}(t)},label:"Sand Clone"},k:{activate:function(){return function(t){var e=t.actors[t.currentActor],n=t.game,a=e.pos,r=new Ct({initiatedBy:e,pos:a,renderer:{character:"\u2588",color:"white",background:""},name:"Cursor",game:n,keymap:c(t,e,ce({},e.keymap))});t.addActorAsPrevious(r),t.setActorToPrevious(r),n.placeActorOnMap(r),n.draw()}(t)},label:"Sand Tomb"},j:{activate:function(){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.actors[t.currentActor],a=new re({game:t.game,actor:n,name:"Sand Skin",lifespan:1e3,stepInterval:100,allowDuplicates:!1,onStart:function(){n.durability+=e,console.log("".concat(n.name," was enveloped in hardened sand.")),n.renderer.background="#A89078"},onStop:function(){n.durability=Math.max(1,n.durability-e),console.log("".concat(n.name,"'s hardened sand skin fell away.")),n.renderer.background="#603030"}});n.setNextAction(new et({effect:a,actor:n,game:t.game}))}(t,10)},label:"Sand Skin"},h:{activate:function(){return a(t)},label:"Sand Wall"},o:{activate:function(){return i(t)},label:"Sand Pulse"},i:{activate:function(){return ee(t)},label:"Open Inventory"},q:{activate:function(){return ne(t)},label:"Open Equipment"},g:{activate:function(){return ae(t)},label:"Drop Item"},p:{activate:function(){return Xt(t)},label:"Pickup"},t:{activate:function(){return te(t)},label:"Throw"},y:{activate:function(){return Zt(t.game)},label:"Add NPC"}}}(t)});return o.container=Object(F.a)(Array(10).fill("").map(function(){return Ut(t,ce({},o.pos))})),o}(oe);oe.actors.push(se);var ue=new L({engine:oe}),le=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={game:ue},n.presserRef=r.a.createRef(),n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(v.a.mark(function t(){var e=this;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ue.initialize(this.presserRef),ue.updateReact=function(t){e.setState({game:t})},oe.start();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t,e,n,a=this,i=this.state.game.engine.actors[this.state.game.engine.currentActor],c=[{label:"Engine: Current Actor Index",value:this.state.game.engine.currentActor},{label:"Current Actor",value:i.name},{label:"Current Actor: Speed / Energy",value:"".concat(i.speed," / ").concat(i.energy)}];return r.a.createElement("div",{className:"Level"},r.a.createElement("div",{className:"flow-text"},"Chunin Exams"),r.a.createElement("button",{className:"btn",onClick:function(){return a.props.setActiveScreen(y.TITLE)}},"Quit"),r.a.createElement("div",{className:"row"},r.a.createElement(G,{data:c}),r.a.createElement(U,{equipment:this.state.game.visibleEquipment}),r.a.createElement(K,{inventory:this.state.game.visibleInventory}),r.a.createElement(W,{keymap:this.state.game.visibleKeymap}),(t=this.presserRef,e=_,n=oe,r.a.createElement("div",{id:"display",ref:t,onKeyDown:function(t){return e(t,n)},tabIndex:"0"}))))}}]),e}(r.a.Component),pe=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).state={},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"Title"},r.a.createElement("div",{style:{width:"100vw",height:"100vh",backgroundColor:"#e2e2e2"}},r.a.createElement("div",{class:"flow-text"},"Hidden Leaf RL"),r.a.createElement("button",{class:"btn",onClick:function(){return t.props.setActiveScreen(y.LEVEL)}},"Play")))}}]),e}(r.a.Component),he=function(t){function e(){var t;return Object(o.a)(this,e),(t=Object(u.a)(this,Object(l.a)(e).call(this))).state={activeScreen:y.LEVEL},t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"setActiveScreen",value:function(t){this.setState({activeScreen:t})}},{key:"getActiveScreen",value:function(){var t=r.a.createElement(pe,{key:y.TITLE,setActiveScreen:this.setActiveScreen.bind(this)}),e=r.a.createElement(le,{key:y.LEVEL,setActiveScreen:this.setActiveScreen.bind(this)});switch(this.state.activeScreen){case y.TITLE:return t;case y.LEVEL:return e;default:return t}}},{key:"render",value:function(){var t=this.getActiveScreen();return r.a.createElement("div",{className:"Nystrum"},r.a.createElement(f.a,{transitionName:"fade",transitionAppear:!0,transitionEnter:!0,transitionLeave:!0,transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},t))}}]),e}(r.a.Component),fe=function(t,e){for(var n in t){var a=n.split(","),r=parseInt(a[0]),i=parseInt(a[1]),c=t[n],o={GROUND:{background:"#974",foreground:"#aaa",character:".",passable:!0}}[c.type],s=o.character,u=o.foreground,l=o.background;if(c.entities.length>0){var p=c.entities[c.entities.length-1];s=p.components.renderer.character,u=p.components.renderer.color,p.components.renderer.background&&(l=p.components.renderer.background)}e.draw(r,i,s,u,l)}},ye=function(t){return"".concat(t.x,",").concat(t.y)},ge=function(t){return t.filter(function(t){return t.components.hasOwnProperty("impasse")&&!t.components.impasse.passable})},ve=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise(function(e){return setTimeout(e,t)})};function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var de=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Empty",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,r={id:t,name:e,components:n,world:a,sendEvent:function(t,e,n){return Oe(t,e,n,a)}};return r},Oe=function(){var t=Object(m.a)(v.a.mark(function t(){var e,n,a,r,i,c,o,s=arguments;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.length>0&&void 0!==s[0]?s[0]:null,n=s.length>1&&void 0!==s[1]?s[1]:null,a=s.length>2&&void 0!==s[2]?s[2]:null,r=s.length>3&&void 0!==s[3]?s[3]:null,i=!1,t.t0=v.a.keys(e.components);case 6:if((t.t1=t.t0()).done){t.next=19;break}if(c=t.t1.value,!(o=e.components[c]).hasOwnProperty(n)){t.next=17;break}if(console.log("SUCCESSFUL EVENT: ",n),i=!0,"PREPARE_RENDER"===n){t.next=15;break}return t.next=15,ve();case 15:o[n](be({},a,{self:e,component:o})),fe(r.map,r.display);case 17:t.next=6;break;case 19:i||console.log("FAILED EVENT");case 20:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var we=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{passable:t,MAKE_PASSABLE:function(t){t.component.passable=!0},MAKE_IMPASSABLE:function(t){t.component.passable=!1}}},Ee=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return t?{pos:e,MOVE:function(e){var n=e.self,a=e.component,r=e.currentPos,i=e.targetPos;if(t.canOccupy(t.map,i)){a.pos=i;var c=t.map[ye(r)];t.map[ye(r)]=ke({},c,{entities:[]}),n.sendEvent(n,"PREPARE_RENDER")}else console.log("can't move there")}}:(console.log("No world to occupy"),{})},Ae=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{durability:e,DECREASE_DURABILITY:function(t){var e=t.self,n=t.component,a=t.value;n.durability-=a,n.durability<=0&&e.sendEvent(e,"DESTROY")},INCREASE_DURABILITY:function(t){var e=t.component,n=t.value;e.durability+=n},DESTROY:function(e){var n=e.self,a=(e.component,e.value,t.map[ye(n.components.body.pos)]);t.map[ye(n.components.body.pos)].entities=a.entities.filter(function(t){return t.id!==n.id})}}},xe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{character:e,color:n,background:a,PREPARE_RENDER:function(e){var n=e.self;n.components.hasOwnProperty("body")&&t.map[ye(n.components.body.pos)].entities.push(n)}}};function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(n,!0).forEach(function(e){Object(C.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Ce,Se,Te=new b.g.Simple,Ie={canAct:!0,scheduler:Te,engine:new b.c(Te),map:{},display:new b.b({fontSize:24,bg:"#099"}),canOccupy:function(t,e){if(!t.hasOwnProperty(ye(e)))return!1;var n=t[ye(e)];return!(!{GROUND:{background:"#974",foreground:"#aaa",character:".",passable:!0}}[n.type].passable||0!==ge(n.entities).length)||void 0}},Ne=De({},de(1,"Naruto",{reciever:(Ce={x:10,y:30},{responded:!1,RECIEVE:function(t){var e=t.self,n=t.component,a=t.message;console.log(a,Ce.x,Ce.y),n.responded||(n.responded=!0,e.sendEvent(t.sender,"hello","RECIEVE",{message:"copy",sender:e}))}}),body:Ee(Ie,{x:19,y:21}),renderer:xe(Ie,"N","orange","black")},Ie)),Re=De({},de(2,"Box",{body:Ee(Ie,{x:22,y:21}),renderer:xe(Ie,"#","black"),impasse:we(),destructible:Ae(Ie)},Ie)),Me=De({},de(2,"Box",{body:Ee(Ie,{x:22,y:19}),renderer:xe(Ie,"#","black"),impasse:we(),destructible:Ae(Ie)},Ie)),qe=De({},de(2,"Box",{body:Ee(Ie,{x:22,y:17}),renderer:xe(Ie,"#","black"),impasse:we(),destructible:Ae(Ie)},Ie)),Le=De({},de(3,"Kunai",{body:Ee(Ie,{x:20,y:21}),renderer:xe(Ie,"<>","black"),destructible:Ae(Ie),attack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{damage:t}}(),throwable:(Se=Ie,{THROW:function(t){var e=t.self,n=(t.component,t.direction),a=e.components.body.pos,r={x:a.x+n.x,y:a.y+n.y},i=Se.map[ye(r)];if(Se.canOccupy(Se.map,r))e.sendEvent(e,"MOVE",{currentPos:a,targetPos:r}),e.sendEvent(e,"THROW",{direction:n});else{if(Se.map.hasOwnProperty(ye(r))){var c=ge(i.entities).filter(function(t){return t.components.hasOwnProperty("destructible")});c.length>0&&e.sendEvent(c[0],"DECREASE_DURABILITY",{value:1})}e.sendEvent(e,"DECREASE_DURABILITY",{value:1})}}})},Ie)),_e=(r.a.Component,function(t){function e(){return Object(o.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App container-fluid"},r.a.createElement(he,null))}}]),e}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},74:function(t,e,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.89c6414f.chunk.js.map